webpackJsonp([10],{p3NT:function(t,e){},"vS5/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"BlogList",components:{TopSnackbar:a("BnRN").a},data:function(){return{dialog:!1,blogItem:null,snackbarText:"",snackbarTimeout:6e3,loading:!0,pagination:{sortBy:"date",descending:!0},blogs:[],headers:[{text:"标题",value:"title",align:"left"},{text:"时间",value:"date",align:"left"},{text:"操作",value:"date",align:"left",sortable:!1}]}},created:function(){this.getBlogList()},methods:{getBlogList:function(){var t=this;this.$rpserver.get("/api/blog/list").then(function(e){(t.loading=!1,0===e.data.code)?(t.blogs=[],e.data.data.forEach(function(e){e.date=t.$moment(e.date).format("YYYY-MM-DD HH:mm:ss"),t.blogs.push(e)}),t.$forceUpdate()):t.showMsg("获取博客列表失败！")}).catch(function(e){t.showMsg("获取博客列表失败！")})},editBlog:function(t){var e=this.$router.resolve({path:"/admin/dashboard/editor",query:{blogId:t._id}}).href;window.open(e,"_blank")},showDeleteConfirmDialog:function(t){this.dialog=!0,this.blogItem=t},deleteBlog:function(){var t=this,e=this.blogItem;this.dialog=!0,this.$rpserver.delete("/api/blog/delete/"+e._id).then(function(e){t.dialog=!1,t.showMsg(e.data.message),0===e.data.code&&t.getBlogList()}).catch(function(e){t.showMsg("请求博客删除接口失败！")})},showMsg:function(t){this.snackbarText=t,this.$store.commit("showTopSnackbar")}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"blog-list"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{sm12:"",xs12:""}},[a("v-toolbar",{staticClass:"mt-1",attrs:{color:"white",flat:"",dense:""}},[a("v-toolbar-title",[t._v("博客列表")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",dark:""},on:{click:t.getBlogList}},[t._v("\n          刷新\n        ")])],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.blogs,loading:t.loading,pagination:t.pagination,"rows-per-page-items":[8,16,32]},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left text-sm-left"},[t._v(t._s(e.item.title))]),t._v(" "),a("td",{staticClass:"text-xs-left text-sm-left"},[t._v(t._s(e.item.date))]),t._v(" "),a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-3",staticStyle:{"line-height":"3"},attrs:{small:"",color:"primary"},on:{click:function(a){return t.editBlog(e.item)}}},[t._v("\n              edit\n            ")]),t._v(" "),a("v-icon",{staticStyle:{"line-height":"3"},attrs:{small:"",color:"red"},on:{click:function(a){return t.showDeleteConfirmDialog(e.item)}}},[t._v("\n              delete\n            ")])],1)]}},{key:"no-data",fn:function(){return[a("span",[t._v("暂无记录！")])]},proxy:!0}])})],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("操作确认")]),t._v(" "),a("v-card-text",{staticClass:"text-xs-left text-sm-left"},[t._v("\n        操作不可逆！确定要把这篇文章删了吗？要不要再考虑考虑？\n      ")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){t.dialog=!1}}},[t._v("\n          嗯，不删了\n        ")]),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:t.deleteBlog}},[t._v("\n          是的，决心已定\n        ")])],1)],1)],1),t._v(" "),a("TopSnackbar",{attrs:{"snackbar-text":t.snackbarText,"snackbar-timeout":t.snackbarTimeout}})],1)},staticRenderFns:[]};var s=a("VU/8")(n,o,!1,function(t){a("p3NT")},"data-v-566743dd",null);e.default=s.exports}});
//# sourceMappingURL=10.c4e91eb37f0bee828ea8.js.map